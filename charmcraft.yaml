# This file configures Charmcraft.
# See https://canonical-charmcraft.readthedocs-hosted.com/en/stable/reference/files/charmcraft-yaml-file/
type: charm
name: traefik-k8s-path-redirector
title: Traefik K8s Path Redirector
summary: Redirect paths via Traefik.
description: |
  A workloadless charm that publishes a Traefik route for path redirects.

# Documentation:
# https://canonical-charmcraft.readthedocs-hosted.com/en/stable/howto/build-guides/select-platforms/
base: ubuntu@22.04
platforms:
  amd64:
  arm64:


parts:
  charm:
    plugin: charm
    source: .

requires:
  traefik-route:
    interface: traefik_route
    limit: 1
    

# (Optional) Configuration options for the charm
# This config section defines charm config options, and populates the Configure
# tab on Charmhub.
# More information on this section at:
# https://canonical-charmcraft.readthedocs-hosted.com/en/stable/reference/files/charmcraft-yaml-file/#config
# General configuration documentation:
# https://canonical-juju.readthedocs-hosted.com/en/latest/user/reference/configuration/#application-configuration
config:
  options:
    direct_path_redirects:
      description: |
        Map of direct path redirects (PathPrefix).

        Example:
          {"/old": "/new", "/docs": "https://ubuntu.net/docs"}
      default: "{}"
      type: string
