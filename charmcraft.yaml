# This file configures Charmcraft.
# See https://canonical-charmcraft.readthedocs-hosted.com/en/stable/reference/files/charmcraft-yaml-file/
type: charm
name: traefik-k8s-path-redirector
title: Traefik K8s Path Redirector
summary: Redirect paths via Traefik.
description: |
  A workloadless charm that publishes a Traefik route for path redirects.

# Documentation:
# https://canonical-charmcraft.readthedocs-hosted.com/en/stable/howto/build-guides/select-platforms/
base: ubuntu@22.04
platforms:
  amd64:
  arm64:


parts:
  charm:
    plugin: charm
    source: .

requires: 
  traefik_route:
    interface: traefik_route
    limit: 1
    

# (Optional) Configuration options for the charm
# This config section defines charm config options, and populates the Configure
# tab on Charmhub.
# More information on this section at:
# https://canonical-charmcraft.readthedocs-hosted.com/en/stable/reference/files/charmcraft-yaml-file/#config
# General configuration documentation:
# https://canonical-juju.readthedocs-hosted.com/en/latest/user/reference/configuration/#application-configuration
config:
  options:
    from_path:
      description: |
        Path prefix to match for redirects.

        Example: "/old" matches "/old" and "/old/anything".
      default: "/from"
      type: string
    to_path:
      description: |
        Target path prefix for redirects.

        Example: "/new" redirects "/old" and "/old/anything" to "/new".
        You can also use an absolute URL like "https://ubuntu.net/hello".
      default: "/to"
      type: string
    from_path_is_regex:
      description: |
        Interpret from_path as a regex for PathRegexp matching.
      default: false
      type: boolean
